using System;
namespace WeDidItReplit
{
    class Program
    {
        static bool IsValid (string Calc)
        {
            string Operations = "+-*/%^"; // all the available operations
            bool IsASymbol = false, AfterFirstOperand = false;



            if (Calc.Length < 5 || Calc[1] != ' ') // checks for the first space and the minimum length
                return false;

            
            for (int i = 0; i<Operations.Length; i++) // checks if the operation is valid
            {
                if (Operations[i] == Calc[0])
                {
                    IsASymbol = true;
                    break;
                }
            }
            if (IsASymbol == false)
            {
                return false;
            }

            for (int i = 2; i<Calc.Length; i++)
            {
                if (Calc[i] == ' ') // checks if a space is supposed to be there
                {
                    if (AfterFirstOperand == false)
                    {
                        AfterFirstOperand = true;
                    }
                    else
                    {
                        return false;
                    }
                }
                else if (Calc[i] == '-') // checking if the dash is the first component of an operand (if it's part of a negative number or an invalid character)
                {
                    if (Calc[i-1] != ' ')
                        return false;
                }
                else if (Calc[i] < '0' || Calc[i] > '9') // checks if the numbers have characters in them
                {
                    return false;
                }
            }
            if (AfterFirstOperand == false || Calc[Calc.Length-1] == ' ') // if the second operand exists
            {
                return false;
            }


            return true;
        }



        static long FirstOperand(string Calc) // extracting the first operand from the string
        {
            long x = 0;
            int sign = 1, i = 2;
            if (Calc[2] == '-')
            {
                sign = -1;
                i++;
            }
            for (; Calc[i] != ' '; i++)
            {
                x = x * 10 + Calc[i] - 48;
            }
            return x * sign;
        }



        static long SecondOperand(string Calc) // extracting the second operand from the string
        {
            long x = 0;
            int i = 2, sign = 1;
            while (Calc[i] != ' ') // skipping to the second blank (the one that separates the first from the second operand)
                i++;
            i++;
            if (Calc[i] == '-')
            {
                sign = -1;
                i++;
            }
            while (i < Calc.Length)
            {
                x = x * 10 + Calc[i] - 48;
                i++;
            }
            return x * sign;
        }



        static double Answer(long op1, long op2, char sign) // The result of the equation
        {
            if (sign == '+')
            {
                return op1 + op2;
            }
            else if (sign == '-')
            {
                return op1 - op2;
            }
            else if (sign == '*')
            {
                return op1 * op2;
            }
            else if (sign == '/')
            {
                return op1 * 1.0 / op2;
            }
            else if (sign == '%')
            {
                return op1 % op2;
            }
            else if (sign == '^')
            {
                double x = 1;
                while (op2 > 0)
                {
                    x *= op1;
                    op2--;
                }
                while (op2 < 0)
                {
                    x /= op1;
                    op2++;
                }
                return x;   
            }
            return 0;
        }



        static void Main(string[] args)
        {
            bool ok = false;
            while (ok == false) // the program will keep requesting input until it's valid
            {
                long op1, op2;

                string Calc = Console.ReadLine(); // reading everything in one string

                if (IsValid(Calc))
                {
                    ok = true; // ensures it exits the cycle if the input is valid
                    op1 = FirstOperand(Calc);
                    op2 = SecondOperand(Calc);
                    Console.WriteLine("The Answer is: " + Answer(op1,op2,Calc[0])); // Calc[0] represents the operator
                }
                else
                {
                    Console.WriteLine("The input is not valid! Please try again.");
                    break;
                }
            }
        }
    }
}
